{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import PostCard from'./PostCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=_ref=>{let{user}=_ref;const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchPosts();},[]);const fetchPosts=async()=>{try{const response=await axios.get('http://localhost:5000/api/posts');setPosts(response.data);}catch(error){console.error('Error fetching posts:',error);setError('ไม่สามารถโหลดโพสต์ได้');}finally{setLoading(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",style:{maxWidth:900,margin:'auto',padding:16},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\\u0E41\\u0E19\\u0E30\\u0E19\\u0E33\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E41\\u0E25\\u0E30\\u0E41\\u0E1A\\u0E48\\u0E07\\u0E1B\\u0E31\\u0E19\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\\u0E14\\u0E35\\u0E46 \\u0E43\\u0E19\\u0E44\\u0E17\\u0E22\"}),posts.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E42\\u0E1E\\u0E2A\\u0E15\\u0E4C\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E40\\u0E1B\\u0E47\\u0E19\\u0E04\\u0E19\\u0E41\\u0E23\\u0E01\\u0E17\\u0E35\\u0E48\\u0E41\\u0E1A\\u0E48\\u0E07\\u0E1B\\u0E31\\u0E19\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\\u0E14\\u0E35\\u0E46 \\u0E01\\u0E31\\u0E19\\u0E40\\u0E16\\u0E2D\\u0E30!\"})]}):posts.map(post=>/*#__PURE__*/_jsx(PostCard,{post:post,currentUser:user,onUpdate:fetchPosts},post.id))]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","axios","PostCard","jsx","_jsx","jsxs","_jsxs","Home","_ref","user","posts","setPosts","loading","setLoading","error","setError","fetchPosts","response","get","data","console","children","style","color","className","maxWidth","margin","padding","length","map","post","currentUser","onUpdate","id"],"sources":["C:/Users/Astaroth/OneDrive/เอกสาร/GitHub/thai-shop-review/client/src/components/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport PostCard from './PostCard';\r\n\r\nconst Home = ({ user }) => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const fetchPosts = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/posts');\r\n      setPosts(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching posts:', error);\r\n      setError('ไม่สามารถโหลดโพสต์ได้');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>กำลังโหลดโพสต์...</div>;\r\n  if (error) return <div style={{ color: 'red' }}>{error}</div>;\r\n\r\n  return (\r\n    <div className=\"home-container\" style={{ maxWidth: 900, margin: 'auto', padding: 16 }}>\r\n      <h1>ร้านค้าแนะนำ</h1>\r\n      <p>ค้นหาและแบ่งปันร้านค้าดีๆ ในไทย</p>\r\n\r\n      {posts.length === 0 ? (\r\n        <div>\r\n          <p>ยังไม่มีโพสต์ร้านค้า</p>\r\n          <p>เป็นคนแรกที่แบ่งปันร้านค้าดีๆ กันเถอะ!</p>\r\n        </div>\r\n      ) : (\r\n        posts.map(post => (\r\n          <PostCard \r\n            key={post.id} \r\n            post={post} \r\n            currentUser={user} \r\n            onUpdate={fetchPosts} \r\n          />\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,IAAI,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CACpB,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACdgB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhB,KAAK,CAACiB,GAAG,CAAC,iCAAiC,CAAC,CACnEP,QAAQ,CAACM,QAAQ,CAACE,IAAI,CAAC,CACzB,CAAE,MAAOL,KAAK,CAAE,CACdM,OAAO,CAACN,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CC,QAAQ,CAAC,uBAAuB,CAAC,CACnC,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAID,OAAO,CAAE,mBAAOR,IAAA,QAAAiB,QAAA,CAAK,yFAAiB,CAAK,CAAC,CAChD,GAAIP,KAAK,CAAE,mBAAOV,IAAA,QAAKkB,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAF,QAAA,CAAEP,KAAK,CAAM,CAAC,CAE7D,mBACER,KAAA,QAAKkB,SAAS,CAAC,gBAAgB,CAACF,KAAK,CAAE,CAAEG,QAAQ,CAAE,GAAG,CAAEC,MAAM,CAAE,MAAM,CAAEC,OAAO,CAAE,EAAG,CAAE,CAAAN,QAAA,eACpFjB,IAAA,OAAAiB,QAAA,CAAI,0EAAY,CAAI,CAAC,cACrBjB,IAAA,MAAAiB,QAAA,CAAG,uLAA+B,CAAG,CAAC,CAErCX,KAAK,CAACkB,MAAM,GAAK,CAAC,cACjBtB,KAAA,QAAAe,QAAA,eACEjB,IAAA,MAAAiB,QAAA,CAAG,0HAAoB,CAAG,CAAC,cAC3BjB,IAAA,MAAAiB,QAAA,CAAG,4NAAsC,CAAG,CAAC,EAC1C,CAAC,CAENX,KAAK,CAACmB,GAAG,CAACC,IAAI,eACZ1B,IAAA,CAACF,QAAQ,EAEP4B,IAAI,CAAEA,IAAK,CACXC,WAAW,CAAEtB,IAAK,CAClBuB,QAAQ,CAAEhB,UAAW,EAHhBc,IAAI,CAACG,EAIX,CACF,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA1B,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}